<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>E-Commerce Front Page (Mini Amazon)</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Arial', sans-serif; background-color: hwb(214 58% 2%); }
  
  /* ðŸ”¹ Header */
  .nav-container {
    display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between;
    background-color: hwb(218 14% 80%); padding: 10px 20px; color: #fff;
  }
  .logo-container { display: flex; align-items: center; gap: 10px; }
  .logo { font-size: 22px; font-weight: bold; }
  .logo-img { width: 40px; height: 40px; border-radius: 50%; }
  .nav-actions { display: flex; align-items: center; gap: 15px; cursor:pointer; }
  .nav-actions div { background: transparent; color: #fff; cursor: pointer; }
  
  /* ðŸ”¹ Products */
  .products {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px; padding: 20px;
  }
  .product {
    background: #fff; border-radius: 8px; padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1); display: flex; flex-direction: column;
    cursor: pointer;
  }
  .main-image { width: 100%; height: 200px; object-fit: contain; margin-bottom: 10px; }
  .thumbnails { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; margin-bottom: 10px; }
  .thumbnail-img { width: 40px; height: 40px; object-fit: contain; border: 2px solid transparent; cursor: pointer; border-radius: 4px; }
  .thumbnail-img.selected { border-color: hsl(53, 100%, 2%); }
  .product-title { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
  .product-price { color: #198754; font-weight: bold; margin-bottom: 10px; }
  .product button { padding: 8px; border: none; border-radius: 4px; cursor: pointer; margin: 5px 5px 0 0; }
  .product .add { background-color: #ffe607; color: white; }
  .product .buy { background-color: #055567; color: white; }
  
  /* ðŸ”¹ Product Detail Popup */
  #productPopup {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background: white; border-radius: 8px; width: 90%; max-width: 500px; padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: none; z-index: 1000;
  }
  #productPopup .close-btn {
    background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px;
    cursor: pointer; float: right;
  }
  #productPopup img {
    width: 100%; height: 300px; object-fit: contain; margin-bottom: 10px;
  }
  #productPopup .thumbnails {
    display: none; /* Hide thumbnails in popup now */
  }
  #overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); z-index: 999; display: none;
  }
  
  /* ðŸ”¹ Cart */
  .cart-modal {
    position: fixed; top: 10%; right: 5%; width: 90%; max-width: 400px;
    background: white; border-radius: 8px; padding: 20px; z-index: 1000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: none; max-height: 70%; overflow-y: auto;
  }
  .cart-item { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; gap: 8px; }
  .cart-item img { width: 40px; height: 40px; border-radius: 4px; object-fit: cover; }
  .cart-item-details { flex: 1; }
  .cart-item button { background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; }
  .cart-modal button.close-cart {
    background: #6c757d; width: 100%; padding: 10px; margin-top: 10px; border: none; border-radius: 4px; cursor: pointer; color: #fff;
  }
</style>
</head>
<body>
<header>
  <div class="nav-container">
    <div class="logo-container">
      <img src="https://uploads.onecompiler.io/44b62kcqu/44dk2tnnc/ChatGPT%20Image%20Feb%2014,%202026,%2010_17_21%20AM.png" alt="ShopHub Logo" class="logo-img">
      <div class="logo">E-Commerce Front Page (Mini Amazon)</div>
    </div>
    <div class="nav-actions">
      <div id="cartBtn">CartðŸ›’ (<span id="cartCount">0</span>)</div>
    </div>
  </div>
</header>

<!-- ðŸ”¹ Products -->
<section class="products" id="productList"></section>

<div id="overlay"></div>

<!-- ðŸ”¹ Product Detail Popup -->
<div id="productPopup">
  <button class="close-btn" onclick="closePopup()">Close</button>
  <img id="popupMainImage" src="" alt="Product Image" />
  <div class="thumbnails" id="popupThumbnails"></div> <!-- will be empty -->
  <h3 id="popupTitle"></h3>
  <p id="popupPrice" style="color:#198754; font-weight:bold;"></p>
  <button class="add" onclick="popupAddToCart()">Add to Cart</button>
  <button class="buy" onclick="popupBuyNow()">Buy Now</button>
</div>

<!-- ðŸ”¹ Cart Modal -->
<section class="cart-modal" id="cartModal">
  <h2>Your Cart</h2>
  <div id="cartItems"></div>
  <button class="close-cart" onclick="closeCart()">Close</button>
</section>

<script>
const products = [
  { id: 1, title: "iPhone 14 Pro", price: 129999, category: "Mobiles", images: [
    "https://images.unsplash.com/photo-1677144646095-ecd95d06cd71?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aXBob25lJTIwMTQlMjBwcm98ZW58MHx8MHx8fDA%3D"
  ]},
  { id: 2, title: "Dell XPS Laptop", price: 99999, category: "Laptops", images: [
    "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=600",
  ]},
  { id: 3, title: "Smartwatch", price: 6999, category: "Watches", images: [
    "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=600",
  ]},
  { id: 4, title: "Running Shoes", price: 3499, category: "Shoes", images: [
    "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=600"
  ]},
  { id: 5, title: "Head Phones", price: 45999, category: "Electronics", images: [
    "https://images.unsplash.com/photo-1583394838336-acd977736f90?w=600",
  ]},
  { id: 6, title: "Sofa Set", price: 25999, category: "Furniture", images: [
    "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c29mYXxlbnwwfHwwfHx8MA%3D%3D",
  ]},
  { id: 7, title: "Men's Jacket", price: 1999, category: "Fashion", images: [
    "https://images.unsplash.com/photo-1611312449408-fcece27cdbb7?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bWVucyUyMGphY2tldHxlbnwwfHwwfHx8MA%3D%3D",
  ]},
  { id: 8, title: "Microwave Oven", price: 8999, category: "Home", images: [
    "https://images.unsplash.com/photo-1574269909862-7e1d70bb8078?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fG1pY3JvJTIwb3ZlbnxlbnwwfHwwfHx8MA%3D%3D"
  ]}
];

const cart = [];
let popupProduct = null;

// (Placeholder variables & functions for user flow)
let currentUser = null; // For demo, no user logged in
let currentProduct = null;
function showAuth(){ alert("Please login or sign up! (Not implemented)"); }
function showPayment(){ alert(`Proceed to payment for: ${currentProduct.title}`); }

function displayProducts(){
  const productList = document.getElementById("productList");
  productList.innerHTML = "";
  products.forEach(product => {
    let thumbnails = product.images.map((src,i) =>
      `<img src="${src}" class="thumbnail-img ${i===0?'selected':''}" onclick="changeMainImage(event, ${product.id}, '${src}')">`
    ).join("");
    productList.innerHTML += `
      <div class="product" onclick="showProductDetails(${product.id})">
        <img src="${product.images[0]}" class="main-image" id="mainImage-${product.id}" />
        <div class="thumbnails">${thumbnails}</div>
        <div class="product-title">${product.title}</div>
        <div class="product-price">â‚¹${product.price.toLocaleString()}</div>
        <button class="add" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
        <button class="buy" onclick="event.stopPropagation(); buyNow(${product.id})">Buy Now</button>
      </div>
    `;
  });
}

function changeMainImage(event, productId, src){
  document.getElementById(`mainImage-${productId}`).src = src;
  event.target.parentNode.querySelectorAll(".thumbnail-img").forEach(img => img.classList.remove("selected"));
  event.target.classList.add("selected");
}

function addToCart(productId){
  const product = products.find(p => p.id === productId);
  cart.push(product);
  saveCart();
  updateCartCount();
  alert(`${product.title} added to cart!`);
}

function updateCartCount(){
  document.getElementById("cartCount").textContent = cart.length;
}

function saveCart(){
  localStorage.setItem('miniAmazonCart', JSON.stringify(cart));
}

function loadCart(){
  const savedCart = JSON.parse(localStorage.getItem('miniAmazonCart'));
  if(savedCart && Array.isArray(savedCart)){
    cart.splice(0, cart.length, ...savedCart);
  }
  updateCartCount();
}

function showCart(){
  const cartModal = document.getElementById("cartModal");
  const cartItems = document.getElementById("cartItems");
  if(cart.length === 0){
    cartItems.innerHTML = "<p>Your cart is empty.</p>";
  } else {
    cartItems.innerHTML = "";
    cart.forEach((item, index) => {
      cartItems.innerHTML += `
      <div class="cart-item">
        <img src="${item.images[0]}" alt="${item.title}">
        <div class="cart-item-details">${item.title} - â‚¹${item.price.toLocaleString()}</div>
        <button onclick="removeFromCart(${index})">Remove</button>
        <button class="buy" onclick="buyNowFromCart(${index})" style="background:#198754; padding:4px 8px; margin-left:5px; border-radius:4px; color:#fff; border:none; cursor:pointer;">Buy Now</button>
      </div>`;
    });
  }
  cartModal.style.display = "block";
  document.getElementById("overlay").style.display = "block";
}

function closeCart(){
  document.getElementById("cartModal").style.display = "none";
  document.getElementById("overlay").style.display = "none";
}

function removeFromCart(index){
  cart.splice(index, 1);
  saveCart();
  updateCartCount();
  showCart();
}

function showProductDetails(productId){
  popupProduct = products.find(p => p.id === productId);
  document.getElementById("popupMainImage").src = popupProduct.images[0];

  // Remove thumbnails from popup - show single image only
  document.getElementById("popupThumbnails").innerHTML = "";

  document.getElementById("popupTitle").textContent = popupProduct.title;
  document.getElementById("popupPrice").textContent = `â‚¹${popupProduct.price.toLocaleString()}`;

  document.getElementById("productPopup").style.display = "block";
  document.getElementById("overlay").style.display = "block";
}

function closePopup(){
  document.getElementById("productPopup").style.display = "none";
  document.getElementById("overlay").style.display = "none";
  popupProduct = null;
}

// Removed changePopupMainImage since no popup thumbnails

function popupAddToCart(){
  if(popupProduct){
    addToCart(popupProduct.id);
    closePopup();
  }
}

function popupBuyNow(){
  if(popupProduct){
    buyNow(popupProduct.id);
    closePopup();
  }
}

function buyNow(productId) {
  if (!currentUser) {
    showAuth(); // Show login/signup modal
    currentProduct = products.find(p => p.id === productId);
    return;
  }

  currentProduct = products.find(p => p.id === productId);
  showPayment(); // Open payment modal
}

function buyNowFromCart(index) {
  if (!currentUser) {
    showAuth();
    currentProduct = cart[index];
    return;
  }

  currentProduct = cart[index];
  showPayment();
}

document.getElementById("cartBtn").addEventListener("click", showCart);
document.getElementById("overlay").addEventListener("click", () => {
  closeCart();
  closePopup();
});

loadCart();
displayProducts();
</script>
</body>
</html>
